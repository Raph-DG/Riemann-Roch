% In this file you should put the actual content of the blueprint.
% It will be used both by the web and the print version.
% It should *not* include the \begin{document}
%
% If you want to split the blueprint content into several files then
% the current file can be a simple sequence of \input. Otherwise It
% can start with a \section or \chapter for instance.

\begin{definition}[Dimension Function]
  \label{def:dimfun}
  A dimension function on a scheme $X$ is defined to be function $\delta : X \rightarrow \mathbb{Z}$
  satisfying such that if $y : X$ is an immediate specialisation of $x : X$, then
  $\delta(x) = \delta(y) + 1$, and $\delta$ is monotone with respect to the
  specialisation order.

  HANDLED BY FORMAL METHODS STUDENTS
\end{definition}

\begin{definition}[Catenary Space]
  \label{def:catenary}
  We say a space is catenary if between every pair of irreducible closed subsets there
  exists a maximal chain of irreducible closed subsets, and all such chains have the
  same length.

  HANDLED BY FORMAL MATHODS CLASS
\end{definition}

\begin{definition}[Universally Catenary Scheme]
  \label{02J7}
  \uses{def:catenary}
  We say a scheme $S$ is universally catenary if, every scheme $X$ with a morhphism
  $X \rightarrow S$ locally of finite type is catenary.
\end{definition}

From now, let $(S, \delta)$ denote a locally Noetherian universally catenary scheme
with dimension funtion $\delta$.


\begin{theorem}[Lifting of dimension functions]
  \label{02JW}
  \uses{02J7}
  \uses{def:dimfun}
  Let $f:X \rightarrow S$ be a morphism of schemes.
  Assume $f$ locally of finite type. Then the map
  \[
  \begin{split}
  \delta_{X / S} &X \rightarrow \mathbb{Z}\\
  &x \mapsto \delta (f (x)) + \text{trdeg}_{\kappa(f(x))} \kappa (x)
  \end{split}
  \]
  where $\kappa(x)$ denotes the residue field at $x$.

\end{theorem}


\begin{definition}[Algebraic Cycle on a sheme]
  \label{def:algcycle}
  \leanok
  \lean{AlgebraicCycle}
  An algebraic cycle on a scheme $X$ is defined to be a function from
  $X \rightarrow \mathbb{Z}$ with locally finite support. We denote the group of all
  algebraic cycles on a scheme by $Z(X)$ (here, $Z(X)$ is not up to rational equivalence).

  Note that the group structure is already defined on this, so I'll omit all of that stuff
  from the blueprint.
\end{definition}

\begin{definition}[Grading of algebraic cycles by dimension]
  \label{def:algcycleofdim}
  \uses{def:algcycle}
  Define the graded pieces of $Z(X)$ to be $Z_k(X)$, the cycles of $X$ where every point
  in the support has dimension $k$.
\end{definition}

\begin{definition}[Pushforward of cycles]
  \label{def:pushcycle}
  \leanok
  \lean{AlgebraicCycle.map}
  \uses{def:algcycle}
  \uses{02JW}
  Define the pushforward of a cycle on $X$ to a cycle $Y$ via a quasifinite morphism $f$. 
  Note $X$ and $Y$ need dimension functions, and for some theorems we may want that they
  are locally finite over $S$ (endowing them with canonical dimension functions).

\end{definition}

\begin{theorem}[Functoriality of the Pushforward]
  \label{thm:pushfunc}
  \uses{def:pushcycle}
\end{theorem}

\begin{definition}[Principal divisors]
  \label{def:principaldivisor}


  Given an integral scheme $X$ and an element $f : R(X)$, 
  define the cycle $div(f)$ on $X$.
\end{definition}

\begin{definition}[Rational equivalence]
  \label{def:rationalequivalence}
  \uses{def:principaldivisor}
  \uses{def:pushcycle}
  Given cycles $D$ and $D'$ on $X$, we say $D$ is rationally equivalent to $D'$ if there
  exists some locally finite family of integral closed subschemes $W_i : X$ with associated
  closed immersions $\iota_i$ such that $D - D' = (\iota i)_* (div f_i)$ for $f_i$ rational
  functions on $W_i$.
\end{definition}

\begin{lemma}[Rational equivalence is an equivalence]
  \label{lem:ratequivisequiv}
  \uses{def:rationalequivalence}
  Rational equivalence is an equivalence relation
\end{lemma}

\begin{definition}[Chow Group graded piece]
  \label{def:chowgroupgraded}
  \uses{lem:ratequivisequiv}
  \uses{def:algcycle}
  Define the graded piece $CH_k(X)$ $X$ to be the quotient of $Z_k(X)$ by rational equivalence
\end{definition}

\begin{definition}[Chow group]
  \label{def:chowgroup}
  \uses{def:chowgroupgraded}
  Define the chow group $CH(X)$ as the direct sum of the graded pieces. Alternatively,
  could show that having constant dimension on the support of a cycle is invariant under
  rational equivalence, then define this first and the graded pieces in the obvious way.
  Will have to talk to someone about what the best way to do that is.
\end{definition}

\begin{definition}[Direct sum of sheaves of modules]
  \label{def:directsumsheafmodules}
  Define the direct sum of sheaves of modules (Probably depends on some things in its own right)
\end{definition}

\begin{definition}[Locally Free Sheaf]
  \label{def:locallyfreesheaf}
  \uses{def:directsumsheafmodules}
  On a ringed space $(X, \reg_X)$, a sheaf of modules $\mathscr{F}$ is locally free if 
  there exists some cover of $X$ on which $\mathscr{F}$ is isomorhpic to the $\oplus_n \reg_X$.

  Of course, this will potentially not be defined by me (I think we could relatively easily
  come up with a definition, but I think others are working on this somehow). 
\end{definition}

\begin{definition}[Rank of locally free sheaf]
  \label{def:locallyfreerank}
  \uses{def:locallyfreesheaf}
  Define the rank of a locally free sheaf
\end{definition}

\begin{definition}[Invertible sheaf definition]
  \label{def:invertiblesheaf}
  \uses{def:locallyfreerank}
  An invertible sheaf is a locally free sheaf of rank 1.
\end{definition}

\begin{definition}[Tensor product of sheaves of modules]
  \label{def:sheaftensorproduct}
  Definition of the tensor product of sheaves of modules on some ringed space.
\end{definition}

\begin{lemma}[Tensor product preserves isomorphism]
  \label{lem:tensorpreservesiso}
  If $L, L'$ and $K, K'$ are two isomorhpic pairs of line bundles, $L \otimes K \cong L' \cong K'$. 

  This should really just follow from functoriality so we should probably just do that,
  still I imagine somebody else will get to this by the time I'm thinking about how this
  should be set up.
\end{lemma}

\begin{lemma}[Invertible sheaves are invertible]
  \label{lem:invertiblesheavesinvertible}
  \uses{def:sheaftensorproduct}
  Invertible sheaves are invertible w.r.t the tensor product over $\reg_X$
\end{lemma}

\begin{definition}[Picard Group]
  \label{def:picardgroup}
  Definition of the group structure on invertible sheaves given by the tensor product.
\end{definition}


\begin{definition}[Sheaf of total quotient rings]
  \label{def:sheafoftotalquotientrings}
\end{definition}

\begin{definition}[Rational section of a line bundle]
  \label{def:rationalsection}
  \uses{def:sheafoftotalquotientrings}
\end{definition}

\begin{definition}[Divisor of a rational section of a line bundle]
  \label{def:divisorofrationalsection}
  \uses{def:rationalsection}
\end{definition}


\begin{theorem}[Divisor of any section same up to rational equivalence]
  \label{thm:sectiondivisorrational}
  \uses{def:divisorofrationalsection}
  Given two rational sections of a line bundle, their associated divisors are linearly equivalent
\end{theorem}

\begin{definition}[The first Chern class]
  \label{def:firstchernclass}
  \uses{def:invertiblesheaf}
  \uses{def:divisorofrationalsection}
  \uses{thm:sectiondivisorrational}
  Define the first chern class of a line bundle (of course, this is just a repackaging
  of the previous theorem if there is some section, otherwise we need the support of 
  a rational section). This is well defined up to rational equivalence.
\end{definition}

\begin{definition}[The map from $Pic(X)$ to $CH_{n-1}(x)$]

\end{definition}


For the definitions about divisors, let $X$ be a noetherian integral scheme
which is regular in codimension 1 meaning all local rings of codimension 1 are
regular (where regular means minimal number of generators for maximal ideal is
equal to Krull dimension).

\begin{definition}\label{def:primediv}
  A prime divisor on $X$ is an irreducible subvariety of $X$ with codimension $1$.
  \end{definition}

\begin{definition}\label{def:weil}
  A Weil Divisor on $X$ is a formal $\mathbb{Z}$-linear combination of prime divisors of $X$. We denote the free abelian group consisting of all the Weil divisors by $\Div(X)$.
\end{definition}

\begin{definition}[Hartshorne p.140]\label{def:constratsheaf}
  Let $X$ be a scheme. For each open affine subset $U = Spec A$,
  let $S$ be the set of elements of $A$ which are not zero divisors,
  and let $K(U)$ be the localization of $A$ by the multiplicative system $S$.

  We call $K(U)$ the total quotient ring of $A$.
  For each open set $U$, let $S(U)$ denote the set of elements of
  $\Gamma(U, \reg_X)$ which are not zero divisors in each local ring $\reg_x$ for $x \in U$.
  Then the rings $S(U)^{-1} \Gamma(U,\reg_X)$ form a presheaf,
  whose associated sheaf of rings $X$ we call the sheaf of total quotient rings
  of $\reg$. On an arbitrary scheme, the sheaf $\mathscr{K}$ replaces the concept
  of function field of an integral scheme.

  We denote by $\mathscr{K}^*$ the sheaf (of multiplicative groups)
  of invertible elements in the sheaf of rings $\mathscr{K}$.

  Similarly $\reg^*$ is the sheaf of invertible elements in $\reg$.
\end{definition}

\begin{definition}[Hartshorne p.141]\label{def:cartierdivisor}
A Cartier divisor is a global section of the sheaf $\mathscr{K}^* / \reg^*$.
A Cartier divisor is principal if it is in the image of the natural map
$\Gamma(X,\mathscr{K}) \rightarrow T(X, \mathscr{K}^* / \reg^*)$.

Two Cartier divisors are linearly equivalent if their difference is principal.
(Although the group operation on $\mathscr{K}^* / \reg^*$ is multiplication,
we will use the language of additive groups when speaking of Cartier divisors,
so as to preserve the analogy with Weil divisors.)
\end{definition}

NEED LINE BUNDLE DIVISOR EQUIVALENCE - I.E. LINE BUNDLE
ASSOCIATED WITH A DIVISOR SO WE CAN DO

NEED AN EQUIVALENCE OF DIVISOR DEFINITIONS BECAUSE LINE BUNDLE
DIVISOR EQUIVALENCE REALLY NEEDS CARTIER BUT DOING INDUCTION BY
ADDING POINTS TO THE DIVISOR IS REALLY USING A WEIL DIVISOR


NEED A COHOMOLOGY DEFINITION

NEED:-
- COHOMOLOGY LONG EXACT SEQUENCE FOR EULER CHAR

- NEED TENSOR PRODUCT OF SHEAVES AND
THAT TENSORING WITH LINE BUNDLES IS EXACT

-



\begin{lemma}[Skyscraper Sheaf has Vanishing Higher Cohomology]\label{lem:skyscrapervanishing}
Given a skyscraper sheaf $\mathscr{F}$ on a topological space $Y$,
for all $i \in \mathbb{N} \setminus \{0\}$, $H^i(\mathscr{F}, Y) = 0$.
\end{lemma}
\begin{proof}
Hartshorne Chap 3 Prop 2.5 p.208 shows this by showing skscraper sheaves are flasque.
I think I prefer showing that given any cover, can always refine it so only one set
in the cover contains the point where the sheaf is supported. Hence the sheaf
has no sections on intersections of sheaves of the cover and so neessarily has
vanishing higher cohomology.
\end{proof}

\begin{theorem}[Euler Characteristic Addititive] \label{thm:eulercharadditive}
  Given a short exact sequence of sheaves:
  \[
  0 \rightarrow \mathscr{F}' \rightarrow \mathscr{F} \rightarrow \mathscr{F}'' \rightarrow 0,
  \]
  the Euler characteristic is additive, that is:
  \[
  \chi(\mathscr{F}) = \chi(\mathscr{F}') + \chi(\mathscr{F}'').
  \]
\end{theorem}
  \begin{proof}[Proof sketch]
    This follows by first taking the corresponding long exact sequence of cohomology groups
    \[
    \begin{split}
    0 &\xrightarrow{\varphi_0'} H^0(X, \mathscr{F'}) \xrightarrow{\varphi_0}  H^0(X, \mathscr{F}) \xrightarrow{\varphi_0''}  H^0(X, \mathscr{F''})\\
    &\xrightarrow{\varphi_1'} H^1(X, \mathscr{F'}) \xrightarrow{\varphi_1} H^1(X, \mathscr{F}) \xrightarrow{\varphi_1''} H^1(X, \mathscr{F''}) \xrightarrow{\varphi_2'} ....\\
    \end{split}
    \]
    We then see that this splits as the following set of short exact sequences:
    \[
    0 \rightarrow \coker(\varphi_p') \xrightarrow{\varphi_p} H^p(X, \mathscr{F}) \xrightarrow{\varphi_p''} \im(\varphi_p'') \rightarrow 0.
    \]
    But since these are vector spaces, the dimension on these short exact sequences is additive, and so the alternating sum of the dimensions of our cohomology groups is $0$. Rearranging this identity then gives the desired result.
\end{proof}

\begin{theorem}[Riemann-Roch for curves]\label{thm:riemannroch}
  Given a smooth projective curve $X$ over an algebraically closed field $k$ and a divisor $D$ on $X$, the following identity holds:
  \[
  \chi(\reg_X(D)) = \chi(\reg_X) + \deg D
  \]

  In this context, the word divisor here is implying that what definition we use
  doesn't make a difference (which is mainly where the smooth and projective
  assumptions are actually used).

  For this, we probably want to cover some theory about divisors and line bundles
  in here.
  \end{theorem}
  \begin{proof}
  We will prove this by an induction argument on $D$ noting that any divisor $D$ can be built up by adding or subtracting points $P$ starting from the divisor $0$. To that end, we will first note that $\chi(\reg_X(0)) = \chi(\reg_X) + 0$, hence our formula holds for the $0$ divisor. Now, for our inductive case, suppose our formula holds for a divisor $D$, i.e. that $\chi(\reg_X(D)) = \chi(\reg_X) + \deg D$. We'll try to show it must then hold for $D + P$, where $P$ is the divisor of a point. Then, we recall that we have the following exact sequence:

  \[
  0 \rightarrow \reg_X(-P) \rightarrow \reg_X \rightarrow \reg_P \rightarrow 0.
  \]
  Now, we can twist this exact sequence by $\reg_X(D+P)$, noting that since $\reg_X(D+P)$ is a line bundle, $\reg_X(D+P) \otimes_{\reg_X} \reg_P \simeq \reg_X \otimes_{\reg_X} \reg_P \simeq \reg_P$. So, we end up with the following exact sequence:

  \[
  0 \rightarrow \reg_X(D) \rightarrow \reg_X(D + P) \rightarrow \reg_P \rightarrow 0
  \]

  Hence, we have by \autoref{thm:eulercharadditive} that $\chi(\reg_X(D+P)) = \chi(\reg_X(D)) + \chi(\reg_{X, p})$. Now, we know from \autoref{lem:skyscrapervanishing} that $\chi(\reg_{X, p}) = 1$, hence:
  \[
  \begin{split}
  \chi(\reg_X(D+P)) &= \chi(\reg_X(D)) + 1,\\
  &= \chi(\reg_X) + \deg(D) + 1, \text{ by inductive hypothesis,}\\
  &= \chi(\reg_X) + \deg(D + P).\\
  \end{split}
  \]
  Now, we have another inductive case where we know our property holds for some divisor $D$, and we need to show it holds for $D - P$. The argument for this case is very similar, instead twisting our initial exact sequence by $\reg_X(D)$ to get:
  \[
  0 \rightarrow \reg_X(D-P) \rightarrow \reg_X(D) \rightarrow \reg_P \rightarrow 0.
  \]
  Then, again using the additivity of the Euler characteristic, we get:
  \[
  \begin{split}
  \chi(\reg_X(D-P)) &= \chi(\reg_X(D)) -1,\\
  &= \chi(\reg_X) + \deg(D) - 1, \text{ by inductive hypothesis,}\\
  &= \chi(\reg_X) + \deg(D - P).\\
  \end{split}
  \]
  Thus, by induction, our property is proven.
  \end{proof}
